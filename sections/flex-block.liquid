<!-- eslint-disable max-len -->
{% for block in section.blocks %}
  {% if block.type != 'block' or block.settings.content == blank %}
    {% continue %}
  {% endif %}

  {% render 'flex-block'
    width: section.settings.width,
    image: block.settings.image,
    title: block.settings.title,
    title_size: block.settings.title_size,
    content: block.settings.content,
    cta_text: block.settings.cta_text,
    cta_url: block.settings.cta_url
  %}
{% endfor %}

{% schema %}
{
  "name": "Flex Block",
  "class": "flex-block wrapper",
  "tag": "section",
  "settings": [
    {
      "type": "radio",
      "id": "width",
      "label": "Block Width",
      "options": [
        {
          "value": "30",
          "label": "30%"
        },
        {
          "value": "50",
          "label": "50%"
        },
        {
          "value": "100",
          "label": "100%"
        }
      ],
      "default": "50"
    }
  ],
  "blocks": [
    {
      "type": "block",
      "name": "Block",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Header Image"
        },
        {
          "type": "text",
          "id": "title",
          "default": "Suspendisse tristique lectus non turpis pellentesque",
          "label": "Title"
        },
        {
          "type": "select",
          "id": "title_size",
          "label": "Title Size",
          "options": [
            {
              "value": "h2",
              "label": "H2"
            },
            {
              "value": "h3",
              "label": "H3"
            },
            {
              "value": "h4",
              "label": "H4"
            }
          ],
          "default": "h3"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content",
          "default": "<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>"
        },
        {
          "type": "text",
          "id": "cta_text",
          "default": "Etiam auctor",
          "label": "CTA Text"
        },
        {
          "type": "url",
          "id": "cta_url",
          "label": "CTA Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Flex Block Section",
      "blocks": [
        {
          "type": "block"
        },
        {
          "type": "block"
        },
        {
          "type": "block"
        },
        {
          "type": "block"
        }
      ]
    }
  ]
}
{% endschema %}
